{"ast":null,"code":"import _objectSpread from\"C:/Users/Fahad/Downloads/webb/webproject/my-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from\"react\";import{useDispatch}from\"react-redux\";import{createRequest,updateRequest}from\"../../redux/slices/requestSlice\";import InputField from\"../../components/inputField/inputField\";import Button from\"../../components/Button/button\";import{useNavigate,useLocation}from\"react-router-dom\";import Popup from\"reactjs-popup\";import\"reactjs-popup/dist/index.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AddRequest=_ref=>{var _location$state;let{label}=_ref;const dispatch=useDispatch();const navigate=useNavigate();const location=useLocation();const editRequest=(_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.request;const[formData,setFormData]=useState({message:\"\",status:\"Pending\",type:\"\"});const[popupMessage,setPopupMessage]=useState(null);const[popupType,setPopupType]=useState(null);useEffect(()=>{if(editRequest)setFormData(editRequest);},[editRequest]);const handleChange=e=>{const{name,value}=e.target;setFormData(_objectSpread(_objectSpread({},formData),{},{[name]:value}));};const handleSubmit=async e=>{e.preventDefault();try{if(editRequest){await dispatch(updateRequest(_objectSpread({id:editRequest._id},formData))).unwrap();setPopupMessage(\"Request updated successfully\");setPopupType(\"success\");}else{await dispatch(createRequest(formData)).unwrap();setPopupMessage(\"Request created successfully\");setPopupType(\"success\");}setFormData({message:\"\",status:\"Pending\",type:\"\"});}catch(error){setPopupMessage(\"Failed to save request\");setPopupType(\"error\");}};const closePopup=()=>{setPopupMessage(null);if(popupType===\"success\"){navigate(\"/dashboard/requests\");}};return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center min-h-screen bg-white\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full max-w-md p-8 bg-white border-2 border-gray-800 rounded-lg shadow-lg\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl text-highlight mb-6 text-center\",children:editRequest?\"Edit Request\":\"Add Request\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(InputField,{label:\"Message\",name:\"message\",id:\"message\",placeholder:\"Enter request message\",value:formData.message,onChange:handleChange}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"status\",className:\"block text-highlight text-base mb-2\",children:\"Status\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"status\",id:\"status\",className:\"shadow bg-primary appearance-none border border-accent rounded w-full py-2 px-3 text-white leading-tight focus:outline-none focus:shadow-outline focus:border-highlight hover:bg-primary hover:text-white hover:border-highlight\",value:formData.status,onChange:handleChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"Pending\",children:\"Pending\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Completed\",children:\"Completed\"}),/*#__PURE__*/_jsx(\"option\",{value:\"In Progress\",children:\"In Progress\"})]})]}),/*#__PURE__*/_jsx(InputField,{label:\"Type\",name:\"type\",id:\"type\",placeholder:\"Enter request type\",value:formData.type,onChange:handleChange}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex my-4 gap-x-4\",children:[/*#__PURE__*/_jsx(Button,{text:editRequest?\"Update Request\":\"Create Request\"}),/*#__PURE__*/_jsx(Button,{text:\"Close\",onClick:()=>navigate(\"/dashboard/requests\")})]})]}),popupMessage&&/*#__PURE__*/_jsx(Popup,{open:true,onClose:closePopup,closeOnDocumentClick:true,children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full p-6 text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-primary mb-4\",children:popupMessage}),/*#__PURE__*/_jsx(Button,{text:\"OK\",onClick:closePopup})]})})]})});};export default AddRequest;","map":{"version":3,"names":["React","useEffect","useState","useDispatch","createRequest","updateRequest","InputField","Button","useNavigate","useLocation","Popup","jsx","_jsx","jsxs","_jsxs","AddRequest","_ref","_location$state","label","dispatch","navigate","location","editRequest","state","request","formData","setFormData","message","status","type","popupMessage","setPopupMessage","popupType","setPopupType","handleChange","e","name","value","target","_objectSpread","handleSubmit","preventDefault","id","_id","unwrap","error","closePopup","className","children","onSubmit","placeholder","onChange","htmlFor","text","onClick","open","onClose","closeOnDocumentClick"],"sources":["C:/Users/Fahad/Downloads/webb/webproject/my-app/src/pages/Request/AddRequest.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { createRequest, updateRequest } from \"../../redux/slices/requestSlice\";\r\nimport InputField from \"../../components/inputField/inputField\";\r\nimport Button from \"../../components/Button/button\";\r\nimport { useNavigate, useLocation } from \"react-router-dom\";\r\nimport Popup from \"reactjs-popup\";\r\nimport \"reactjs-popup/dist/index.css\";\r\n\r\nconst AddRequest = ({ label }) => {\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const editRequest = location.state?.request;\r\n\r\n  const [formData, setFormData] = useState({\r\n    message: \"\",\r\n    status: \"Pending\",\r\n    type: \"\",\r\n  });\r\n  const [popupMessage, setPopupMessage] = useState(null);\r\n  const [popupType, setPopupType] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (editRequest) setFormData(editRequest);\r\n  }, [editRequest]);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData({ ...formData, [name]: value });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      if (editRequest) {\r\n        await dispatch(\r\n          updateRequest({ id: editRequest._id, ...formData })\r\n        ).unwrap();\r\n        setPopupMessage(\"Request updated successfully\");\r\n        setPopupType(\"success\");\r\n      } else {\r\n        await dispatch(createRequest(formData)).unwrap();\r\n        setPopupMessage(\"Request created successfully\");\r\n        setPopupType(\"success\");\r\n      }\r\n      setFormData({ message: \"\", status: \"Pending\", type: \"\" });\r\n    } catch (error) {\r\n      setPopupMessage(\"Failed to save request\");\r\n      setPopupType(\"error\");\r\n    }\r\n  };\r\n\r\n  const closePopup = () => {\r\n    setPopupMessage(null);\r\n    if (popupType === \"success\") {\r\n      navigate(\"/dashboard/requests\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex items-center justify-center min-h-screen bg-white\">\r\n      <div className=\"w-full max-w-md p-8 bg-white border-2 border-gray-800 rounded-lg shadow-lg\">\r\n        <h1 className=\"text-3xl text-highlight mb-6 text-center\">\r\n          {editRequest ? \"Edit Request\" : \"Add Request\"}\r\n        </h1>\r\n        <form onSubmit={handleSubmit}>\r\n          <InputField\r\n            label=\"Message\"\r\n            name=\"message\"\r\n            id=\"message\"\r\n            placeholder=\"Enter request message\"\r\n            value={formData.message}\r\n            onChange={handleChange}\r\n          />\r\n          <div className=\"mb-4\">\r\n            <label\r\n              htmlFor=\"status\"\r\n              className=\"block text-highlight text-base mb-2\"\r\n            >\r\n              Status\r\n            </label>\r\n            <select\r\n              name=\"status\"\r\n              id=\"status\"\r\n              className=\"shadow bg-primary appearance-none border border-accent rounded w-full py-2 px-3 text-white leading-tight focus:outline-none focus:shadow-outline focus:border-highlight hover:bg-primary hover:text-white hover:border-highlight\"\r\n              value={formData.status}\r\n              onChange={handleChange}\r\n            >\r\n              <option value=\"Pending\">Pending</option>\r\n              <option value=\"Completed\">Completed</option>\r\n              <option value=\"In Progress\">In Progress</option>\r\n            </select>\r\n          </div>\r\n\r\n          <InputField\r\n            label=\"Type\"\r\n            name=\"type\"\r\n            id=\"type\"\r\n            placeholder=\"Enter request type\"\r\n            value={formData.type}\r\n            onChange={handleChange}\r\n          />\r\n          <div className=\"flex my-4 gap-x-4\">\r\n            <Button text={editRequest ? \"Update Request\" : \"Create Request\"} />\r\n            <Button\r\n              text=\"Close\"\r\n              onClick={() => navigate(\"/dashboard/requests\")}\r\n            />\r\n          </div>\r\n        </form>\r\n        {popupMessage && (\r\n          <Popup open={true} onClose={closePopup} closeOnDocumentClick>\r\n            <div className=\"w-full p-6 text-center\">\r\n              <p className=\"text-primary mb-4\">{popupMessage}</p>\r\n              <Button text=\"OK\" onClick={closePopup} />\r\n            </div>\r\n          </Popup>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AddRequest;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}