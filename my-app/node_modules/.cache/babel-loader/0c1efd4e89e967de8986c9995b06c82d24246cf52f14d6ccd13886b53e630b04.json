{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{updateOwner,clearMessage,clearError}from\"../../redux/slices/updateSlice/updateSlice\";import Popup from\"reactjs-popup\";import\"reactjs-popup/dist/index.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UpdateEmailPage=()=>{const[newEmail,setNewEmail]=useState(\"\");const[confirmNewEmail,setConfirmNewEmail]=useState(\"\");const[popupMessage,setPopupMessage]=useState(null);const dispatch=useDispatch();const{loading,message,error}=useSelector(state=>state.update);useEffect(()=>{setPopupMessage(message||error);},[message,error]);const handleUpdate=async()=>{if(!newEmail||!confirmNewEmail){setPopupMessage(\"Both fields are required\");setTimeout(()=>setPopupMessage(null),3000);return;}if(newEmail!==confirmNewEmail){setPopupMessage(\"Emails do not match\");setTimeout(()=>setPopupMessage(null),3000);return;}const form=document.getElementById(\"updateEmailForm\");if(!form.checkValidity()){form.reportValidity();return;}try{const response=await dispatch(updateOwner({id:1,email:newEmail})).unwrap();setPopupMessage(response.message||\"Email updated successfully\");setTimeout(()=>{setPopupMessage(null);},3000);dispatch(clearMessage());dispatch(clearError());setNewEmail(\"\");setConfirmNewEmail(\"\");}catch(error){console.error(\"Error updating email:\",error);setPopupMessage(\"Failed to update email\");}};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-white flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full max-w-md bg-primary p-8 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-6 text-center text-highlight\",children:\"Update Email\"}),/*#__PURE__*/_jsxs(\"form\",{id:\"updateEmailForm\",onSubmit:e=>e.preventDefault(),noValidate:true,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-highlight mb-2\",htmlFor:\"newEmail\",children:\"New Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"newEmail\",value:newEmail,onChange:e=>setNewEmail(e.target.value),className:\"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:border-highlight\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-highlight mb-2\",htmlFor:\"confirmNewEmail\",children:\"Confirm New Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"confirmNewEmail\",value:confirmNewEmail,onChange:e=>setConfirmNewEmail(e.target.value),className:\"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:border-highlight\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleUpdate,className:\"bg-highlight text-white px-4 py-2 rounded-md hover:bg-highlight\",disabled:loading,children:loading?\"Updating...\":\"Update Email\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600\",onClick:()=>window.history.back(),children:\"Cancel\"})]})]}),popupMessage&&/*#__PURE__*/_jsx(Popup,{open:true,onClose:()=>setPopupMessage(null),closeOnDocumentClick:true,children:/*#__PURE__*/_jsx(\"div\",{className:\"w-full text-center p-4 rounded-lg shadow-lg\",children:popupMessage})})]})});};export default UpdateEmailPage;","map":{"version":3,"names":["React","useState","useEffect","useDispatch","useSelector","updateOwner","clearMessage","clearError","Popup","jsx","_jsx","jsxs","_jsxs","UpdateEmailPage","newEmail","setNewEmail","confirmNewEmail","setConfirmNewEmail","popupMessage","setPopupMessage","dispatch","loading","message","error","state","update","handleUpdate","setTimeout","form","document","getElementById","checkValidity","reportValidity","response","id","email","unwrap","console","className","children","onSubmit","e","preventDefault","noValidate","htmlFor","type","value","onChange","target","required","onClick","disabled","window","history","back","open","onClose","closeOnDocumentClick"],"sources":["C:/Users/Fahad/Downloads/webb/webproject/my-app/src/pages/Profile/updateEmail.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  updateOwner,\r\n  clearMessage,\r\n  clearError,\r\n} from \"../../redux/slices/updateSlice/updateSlice\";\r\nimport Popup from \"reactjs-popup\";\r\nimport \"reactjs-popup/dist/index.css\";\r\n\r\nconst UpdateEmailPage = () => {\r\n  const [newEmail, setNewEmail] = useState(\"\");\r\n  const [confirmNewEmail, setConfirmNewEmail] = useState(\"\");\r\n  const [popupMessage, setPopupMessage] = useState(null);\r\n  const dispatch = useDispatch();\r\n  const { loading, message, error } = useSelector((state) => state.update);\r\n\r\n  useEffect(() => {\r\n    setPopupMessage(message || error);\r\n  }, [message, error]);\r\n\r\n  const handleUpdate = async () => {\r\n    if (!newEmail || !confirmNewEmail) {\r\n      setPopupMessage(\"Both fields are required\");\r\n      setTimeout(() => setPopupMessage(null), 3000);\r\n      return;\r\n    }\r\n    if (newEmail !== confirmNewEmail) {\r\n      setPopupMessage(\"Emails do not match\");\r\n      setTimeout(() => setPopupMessage(null), 3000);\r\n      return;\r\n    }\r\n\r\n    const form = document.getElementById(\"updateEmailForm\");\r\n    if (!form.checkValidity()) {\r\n      form.reportValidity();\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await dispatch(\r\n        updateOwner({ id: 1, email: newEmail })\r\n      ).unwrap();\r\n      setPopupMessage(response.message || \"Email updated successfully\");\r\n      setTimeout(() => {\r\n        setPopupMessage(null);\r\n      }, 3000);\r\n      dispatch(clearMessage());\r\n      dispatch(clearError());\r\n\r\n      setNewEmail(\"\");\r\n      setConfirmNewEmail(\"\");\r\n    } catch (error) {\r\n      console.error(\"Error updating email:\", error);\r\n      setPopupMessage(\"Failed to update email\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-white flex items-center justify-center\">\r\n      <div className=\"w-full max-w-md bg-primary p-8 rounded-lg shadow-md\">\r\n        <h2 className=\"text-2xl font-bold mb-6 text-center text-highlight\">\r\n          Update Email\r\n        </h2>\r\n        <form\r\n          id=\"updateEmailForm\"\r\n          onSubmit={(e) => e.preventDefault()}\r\n          noValidate\r\n        >\r\n          <div className=\"mb-4\">\r\n            <label className=\"block text-highlight mb-2\" htmlFor=\"newEmail\">\r\n              New Email\r\n            </label>\r\n            <input\r\n              type=\"email\"\r\n              id=\"newEmail\"\r\n              value={newEmail}\r\n              onChange={(e) => setNewEmail(e.target.value)}\r\n              className=\"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:border-highlight\"\r\n              required\r\n            />\r\n          </div>\r\n          <div className=\"mb-4\">\r\n            <label\r\n              className=\"block text-highlight mb-2\"\r\n              htmlFor=\"confirmNewEmail\"\r\n            >\r\n              Confirm New Email\r\n            </label>\r\n            <input\r\n              type=\"email\"\r\n              id=\"confirmNewEmail\"\r\n              value={confirmNewEmail}\r\n              onChange={(e) => setConfirmNewEmail(e.target.value)}\r\n              className=\"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:border-highlight\"\r\n              required\r\n            />\r\n          </div>\r\n          <div className=\"flex justify-between\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={handleUpdate}\r\n              className=\"bg-highlight text-white px-4 py-2 rounded-md hover:bg-highlight\"\r\n              disabled={loading}\r\n            >\r\n              {loading ? \"Updating...\" : \"Update Email\"}\r\n            </button>\r\n            <button\r\n              type=\"button\"\r\n              className=\"bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600\"\r\n              onClick={() => window.history.back()}\r\n            >\r\n              Cancel\r\n            </button>\r\n          </div>\r\n        </form>\r\n        {popupMessage && (\r\n          <Popup\r\n            open={true}\r\n            onClose={() => setPopupMessage(null)}\r\n            closeOnDocumentClick\r\n          >\r\n            <div className=\"w-full text-center p-4 rounded-lg shadow-lg\">\r\n              {popupMessage}\r\n            </div>\r\n          </Popup>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UpdateEmailPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}