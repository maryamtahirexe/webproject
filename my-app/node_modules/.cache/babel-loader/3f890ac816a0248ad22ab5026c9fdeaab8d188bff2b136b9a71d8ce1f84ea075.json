{"ast":null,"code":"import _objectSpread from\"C:/Users/Fahad/Downloads/webb/webproject/my-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from\"react\";import{useDispatch}from\"react-redux\";import{createPayment,updatePayment}from\"../../redux/slices/paymentSlice\";import InputField from\"../../components/inputField/inputField\";import Button from\"../../components/Button/button\";import{useNavigate,useLocation}from\"react-router-dom\";import Popup from'reactjs-popup';import'reactjs-popup/dist/index.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AddPayment=()=>{var _location$state;const dispatch=useDispatch();const navigate=useNavigate();const location=useLocation();const editPayment=(_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.payment;const[formData,setFormData]=useState({amount:\"\",bankAccountNumber:\"\",message:\"\"});const[popupMessage,setPopupMessage]=useState(null);const[popupType,setPopupType]=useState(null);useEffect(()=>{if(editPayment)setFormData(editPayment);},[editPayment]);const handleChange=e=>{const{name,value}=e.target;setFormData(_objectSpread(_objectSpread({},formData),{},{[name]:value}));};const handleSubmit=async e=>{e.preventDefault();try{if(editPayment){await dispatch(updatePayment(_objectSpread({id:editPayment._id},formData))).unwrap();setPopupMessage(\"Payment updated successfully\");setPopupType(\"success\");}else{await dispatch(createPayment(formData)).unwrap();setPopupMessage(\"Payment created successfully\");setPopupType(\"success\");}setFormData({amount:\"\",bankAccountNumber:\"\",message:\"\"});}catch(error){setPopupMessage(\"Failed to save payment\");setPopupType(\"error\");}};const closePopup=()=>{setPopupMessage(null);if(popupType===\"success\"){navigate(\"/dashboard/payments\");}};return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center min-h-screen bg-white\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full max-w-md p-8 bg-white border-2 border-gray-800 rounded-lg shadow-lg\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl text-highlight mb-6 text-center\",children:editPayment?\"Edit Payment\":\"Add Payment\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(InputField,{label:\"Amount\",name:\"amount\",id:\"amount\",placeholder:\"Enter payment amount\",value:formData.amount,onChange:handleChange}),/*#__PURE__*/_jsx(InputField,{label:\"Bank Account Number\",name:\"bankAccountNumber\",id:\"bankAccountNumber\",placeholder:\"Enter bank account number\",value:formData.bankAccountNumber,onChange:handleChange}),/*#__PURE__*/_jsx(InputField,{label:\"Message\",name:\"message\",id:\"message\",placeholder:\"Enter a message\",value:formData.message,onChange:handleChange}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex my-4 gap-x-4\",children:[/*#__PURE__*/_jsx(Button,{text:editPayment?\"Update Payment\":\"Create Payment\"}),/*#__PURE__*/_jsx(Button,{text:\"Close\",onClick:()=>navigate(\"/dashboard/payments\")})]})]}),popupMessage&&/*#__PURE__*/_jsx(Popup,{open:true,onClose:closePopup,closeOnDocumentClick:true,children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full p-6 text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-primary mb-4\",children:popupMessage}),/*#__PURE__*/_jsx(Button,{text:\"OK\",onClick:closePopup})]})})]})});};export default AddPayment;","map":{"version":3,"names":["React","useEffect","useState","useDispatch","createPayment","updatePayment","InputField","Button","useNavigate","useLocation","Popup","jsx","_jsx","jsxs","_jsxs","AddPayment","_location$state","dispatch","navigate","location","editPayment","state","payment","formData","setFormData","amount","bankAccountNumber","message","popupMessage","setPopupMessage","popupType","setPopupType","handleChange","e","name","value","target","_objectSpread","handleSubmit","preventDefault","id","_id","unwrap","error","closePopup","className","children","onSubmit","label","placeholder","onChange","text","onClick","open","onClose","closeOnDocumentClick"],"sources":["C:/Users/Fahad/Downloads/webb/webproject/my-app/src/pages/Payment/AddPayment.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { createPayment, updatePayment } from \"../../redux/slices/paymentSlice\";\r\nimport InputField from \"../../components/inputField/inputField\";\r\nimport Button from \"../../components/Button/button\";\r\nimport { useNavigate, useLocation } from \"react-router-dom\";\r\nimport Popup from 'reactjs-popup';\r\nimport 'reactjs-popup/dist/index.css';\r\n\r\nconst AddPayment = () => {\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const editPayment = location.state?.payment;\r\n\r\n  const [formData, setFormData] = useState({\r\n    amount: \"\",\r\n    bankAccountNumber: \"\",\r\n    message: \"\",\r\n  });\r\n  const [popupMessage, setPopupMessage] = useState(null);\r\n  const [popupType, setPopupType] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (editPayment) setFormData(editPayment);\r\n  }, [editPayment]);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData({ ...formData, [name]: value });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      if (editPayment) {\r\n        await dispatch(updatePayment({ id: editPayment._id, ...formData })).unwrap();\r\n        setPopupMessage(\"Payment updated successfully\");\r\n        setPopupType(\"success\");\r\n      } else {\r\n        await dispatch(createPayment(formData)).unwrap();\r\n        setPopupMessage(\"Payment created successfully\");\r\n        setPopupType(\"success\");\r\n      }\r\n      setFormData({ amount: \"\", bankAccountNumber: \"\", message: \"\" });\r\n    } catch (error) {\r\n      setPopupMessage(\"Failed to save payment\");\r\n      setPopupType(\"error\");\r\n    }\r\n  };\r\n\r\n  const closePopup = () => {\r\n    setPopupMessage(null);\r\n    if (popupType === \"success\") {\r\n      navigate(\"/dashboard/payments\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex items-center justify-center min-h-screen bg-white\">\r\n<div className=\"w-full max-w-md p-8 bg-white border-2 border-gray-800 rounded-lg shadow-lg\">\r\n        <h1 className=\"text-3xl text-highlight mb-6 text-center\">\r\n          {editPayment ? \"Edit Payment\" : \"Add Payment\"}\r\n        </h1>\r\n        <form onSubmit={handleSubmit}>\r\n          <InputField\r\n            label=\"Amount\"\r\n            name=\"amount\"\r\n            id=\"amount\"\r\n            placeholder=\"Enter payment amount\"\r\n            value={formData.amount}\r\n            onChange={handleChange}\r\n          />\r\n          <InputField\r\n            label=\"Bank Account Number\"\r\n            name=\"bankAccountNumber\"\r\n            id=\"bankAccountNumber\"\r\n            placeholder=\"Enter bank account number\"\r\n            value={formData.bankAccountNumber}\r\n            onChange={handleChange}\r\n          />\r\n          <InputField\r\n            label=\"Message\"\r\n            name=\"message\"\r\n            id=\"message\"\r\n            placeholder=\"Enter a message\"\r\n            value={formData.message}\r\n            onChange={handleChange}\r\n          />\r\n          <div className=\"flex my-4 gap-x-4\">\r\n            <Button text={editPayment ? \"Update Payment\" : \"Create Payment\"} />\r\n            <Button text=\"Close\" onClick={() => navigate(\"/dashboard/payments\")} />\r\n          </div>\r\n        </form>\r\n        {popupMessage && (\r\n          <Popup open={true} onClose={closePopup} closeOnDocumentClick>\r\n            <div className=\"w-full p-6 text-center\">\r\n              <p className=\"text-primary mb-4\">{popupMessage}</p>\r\n              <Button text=\"OK\" onClick={closePopup} />\r\n            </div>\r\n          </Popup>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AddPayment;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}